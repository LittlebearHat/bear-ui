{"version":3,"file":"avatar.vue.js","sources":["../../../avatar/src/avatar.vue?vue&type=script&setup=true&name=BAvatar&lang.ts"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, resolveComponent as _resolveComponent, withCtx as _withCtx, renderSlot as _renderSlot, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle } from \"vue\"\n\nconst _hoisted_1 = [\"src\", \"alt\", \"srcset\"]\n\nimport { ref, computed, watch } from 'vue'\nimport type { CSSProperties } from 'vue'\nimport { createNamespace } from '@bear-ui/hooks'\nimport { isNumber, isString, addUnit } from '@bear-ui/utils'\nimport { avatarProps, avatarEmits } from './avatar'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'avatar',\n  props: avatarProps,\n  emits: avatarEmits,\n  setup(__props, { emit }) {\n\nconst props = __props;\n\ndefineOptions({\n  //自动导入组件\n  name: 'b-avatar'\n})\nconst bem = createNamespace('avatar')\n\n\n\nconst hasLoadError = ref(false)\n\nconst avatarClass = computed(() => {\n  const { size, icon, shape } = props\n  const classList = [bem.b()]\n  if (isString(size)) classList.push(bem.m(size))\n  if (icon) classList.push(bem.m('icon'))\n  if (shape) classList.push(bem.m(shape))\n  return classList\n})\n\nconst sizeStyle = computed(() => {\n  const { size } = props\n\n  return isNumber(size)\n    ? (bem.cssVarBlock({\n      size: addUnit(size) || '',\n    }) as CSSProperties)\n    : undefined\n})\n\nwatch(\n  () => props.src,\n  () => (hasLoadError.value = false)\n)\n\nfunction handleError(e: Event) {\n  hasLoadError.value = true\n  emit('error', e)\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_b_icon = _resolveComponent(\"b-icon\")!\n\n  return (_openBlock(), _createElementBlock(\"span\", {\n    class: _normalizeClass(_unref(avatarClass)),\n    style: _normalizeStyle(_unref(sizeStyle))\n  }, [\n    ((_ctx.src || _ctx.srcSet) && !hasLoadError.value)\n      ? (_openBlock(), _createElementBlock(\"img\", {\n          key: 0,\n          src: _ctx.src,\n          alt: _ctx.alt,\n          srcset: _ctx.srcSet,\n          onError: handleError\n        }, null, 40, _hoisted_1))\n      : (_ctx.icon)\n        ? (_openBlock(), _createBlock(_component_b_icon, { key: 1 }, {\n            default: _withCtx(() => [\n              (_openBlock(), _createBlock(_resolveDynamicComponent(_ctx.icon)))\n            ]),\n            _: 1\n          }))\n        : _renderSlot(_ctx.$slots, \"default\", { key: 2 })\n  ], 6))\n}\n}\n\n})"],"names":["_defineComponent","_resolveComponent","_openBlock","_createElementBlock","_normalizeClass","_unref","_normalizeStyle","_createBlock","_withCtx","_resolveDynamicComponent","_renderSlot"],"mappings":";;;;;;AAGA,MAAM,aAAa,CAAC,OAAO,OAAO,QAAQ;AAS1C,MAA4B,YAAiBA,gCAAA;AAAA,EAC3C,QAAQ;AAAA,EACR,OAAO;AAAA,EACP,OAAO;AAAA,EACP,MAAM,SAAS,EAAE,QAAQ;AAE3B,UAAM,QAAQ;AAEA,kBAAA;AAAA;AAAA,MAEZ,MAAM;AAAA,IAAA,CACP;AACK,UAAA,MAAM,gBAAgB,QAAQ;AAI9B,UAAA,eAAe,IAAI,KAAK;AAExB,UAAA,cAAc,SAAS,MAAM;AACjC,YAAM,EAAE,MAAM,MAAM,MAAA,IAAU;AAC9B,YAAM,YAAY,CAAC,IAAI,EAAG,CAAA;AAC1B,UAAI,SAAS,IAAI;AAAG,kBAAU,KAAK,IAAI,EAAE,IAAI,CAAC;AAC1C,UAAA;AAAM,kBAAU,KAAK,IAAI,EAAE,MAAM,CAAC;AAClC,UAAA;AAAO,kBAAU,KAAK,IAAI,EAAE,KAAK,CAAC;AAC/B,aAAA;AAAA,IAAA,CACR;AAEK,UAAA,YAAY,SAAS,MAAM;AACzB,YAAA,EAAE,KAAS,IAAA;AAEjB,aAAO,SAAS,IAAI,IACf,IAAI,YAAY;AAAA,QACjB,MAAM,QAAQ,IAAI,KAAK;AAAA,MAAA,CACxB,IACC;AAAA,IAAA,CACL;AAED;AAAA,MACE,MAAM,MAAM;AAAA,MACZ,MAAO,aAAa,QAAQ;AAAA,IAAA;AAG9B,aAAS,YAAY,GAAU;AAC7B,mBAAa,QAAQ;AACrB,WAAK,SAAS,CAAC;AAAA,IACjB;AAEO,WAAA,CAAC,MAAU,WAAgB;AAC1B,YAAA,oBAAoBC,iBAAkB,QAAQ;AAE5C,aAAAC,UAAA,GAAcC,mBAAoB,QAAQ;AAAA,QAChD,OAAOC,eAAgBC,MAAO,WAAW,CAAC;AAAA,QAC1C,OAAOC,eAAgBD,MAAO,SAAS,CAAC;AAAA,MAAA,GACvC;AAAA,SACC,KAAK,OAAO,KAAK,WAAW,CAAC,aAAa,SACvCH,UAAA,GAAcC,mBAAoB,OAAO;AAAA,UACxC,KAAK;AAAA,UACL,KAAK,KAAK;AAAA,UACV,KAAK,KAAK;AAAA,UACV,QAAQ,KAAK;AAAA,UACb,SAAS;AAAA,QACR,GAAA,MAAM,IAAI,UAAU,KACtB,KAAK,QACHD,UAAW,GAAGK,YAAa,mBAAmB,EAAE,KAAK,KAAK;AAAA,UACzD,SAASC,QAAS,MAAM;AAAA,aACrBN,UAAc,GAAAK,YAAaE,wBAAyB,KAAK,IAAI,CAAC;AAAA,UAAA,CAChE;AAAA,UACD,GAAG;AAAA,QAAA,CACJ,KACDC,WAAY,KAAK,QAAQ,WAAW,EAAE,KAAK,GAAG;AAAA,SACnD,CAAC;AAAA,IAAA;AAAA,EAEN;AAEA,CAAC;"}